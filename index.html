<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clean Biological Occurrence Records • rOpenSci: scrubr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- ropensci --><link href="ropensci.css" rel="stylesheet">
<meta property="og:title" content="Clean Biological Occurrence Records">
<meta property="og:description" content="Clean biological occurrence records. Includes functionality
    for cleaning based on various aspects of spatial coordinates,
    unlikely values due to political centroids, coordinates based on
    where collections of specimens are held, and more.">
<meta name="twitter:card" content="summary">
<!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="index.html"><i>scrubr <small>v0.4.0</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/scrubr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/scrubr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="ropensci-the-scrubr-package-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ropensci-the-scrubr-package-" class="anchor"></a>rOpenSci: The <em>scrubr</em> package <img src="hexlogo.png" align="right" height="134.5">
</h1></div>
<p><a href="https://github.com/ropensci/scrubr/actions?query=workflow%3AR-check"><img src="https://github.com/ropensci/scrubr/workflows/R-check/badge.svg" alt="R-check"></a> <a href="https://cranchecks.info/pkgs/scrubr"><img src="https://cranchecks.info/badges/worst/scrubr" alt="cran checks"></a> <a href="https://codecov.io/github/ropensci/scrubr?branch=master"><img src="https://codecov.io/github/ropensci/scrubr/coverage.svg?branch=master" alt="codecov.io"></a> <a href="https://github.com/r-hub/cranlogs.app"><img src="https://cranlogs.r-pkg.org/badges/scrubr?color=ff69b4" alt="rstudio mirror downloads"></a> <a href="https://cran.r-project.org/package=scrubr"><img src="https://www.r-pkg.org/badges/version/scrubr" alt="cran version"></a></p>
<p><strong>Clean Biological Occurrence Records</strong></p>
<p>Clean using the following use cases (checkmarks indicate fxns exist - not necessarily complete):</p>
<ul>
<li>[x] Impossible lat/long values: e.g., latitude 75</li>
<li>[x] Incomplete cases: one or the other of lat/long missing</li>
<li>[x] Unlikely lat/long values: e.g., points at 0,0</li>
<li>[x] Deduplication: try to identify duplicates, esp. when pulling data from multiple sources, e.g., can try to use occurrence IDs, if provided</li>
<li>[x] Date based cleaning</li>
<li>[x] Outside political boundary: User input to check for points in the wrong country, or points outside of a known country</li>
<li>[x] Taxonomic name based cleaning: via <code>taxize</code> (one method so far)</li>
<li>Political centroids: unlikely that occurrences fall exactly on these points, more likely a default position (Draft function started, but not exported, and commented out). see <a href="https://github.com/ropensci/scrubr/issues/6">issue #6</a>
</li>
<li>Herbaria/Museums: many specimens may have location of the collection they are housed in, see <a href="https://github.com/ropensci/scrubr/issues/20">issue #20</a>
</li>
<li>Habitat type filtering: e.g., fish should not be on land; marine fish should not be in fresh water</li>
<li>Check for contextually wrong values: That is, if 99 out of 100 lat/long coordinates are within the continental US, but 1 is in China, then perhaps something is wrong with that one point</li>
<li>Collector/recorder names: see <a href="https://github.com/ropensci/scrubr/issues/19">issue #19</a>
</li>
<li>…</li>
</ul>
<p>A note about examples: We think that using a piping workflow with <code><a href="reference/%&gt;%.html">%&gt;%</a></code> makes code easier to build up, and easier to understand. However, in some examples we provide examples without the pipe to demonstrate traditional usage.</p>
<div id="install" class="section level2">
<h2 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h2>
<p>Stable CRAN version</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"scrubr"</span><span class="op">)</span></code></pre></div>
<p>Development version</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"ropensci/scrubr"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://docs.ropensci.org/scrubr">"scrubr"</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="coordinate-based-cleaning" class="section level2">
<h2 class="hasAnchor">
<a href="#coordinate-based-cleaning" class="anchor"></a>Coordinate based cleaning</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"sampledata1"</span><span class="op">)</span></code></pre></div>
<p>Remove impossible coordinates (using sample data included in the pkg)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># coord_impossible(dframe(sample_data_1)) # w/o pipe</span>
<span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">sample_data_1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/coords.html">coord_impossible</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,500 x 5</span>
<span class="co">#&gt;    name             longitude latitude date                       key</span>
<span class="co">#&gt;  * &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt; &lt;dttm&gt;                   &lt;int&gt;</span>
<span class="co">#&gt;  1 Ursus americanus     -79.7     38.4 2015-01-14 16:36:45 1065590124</span>
<span class="co">#&gt;  2 Ursus americanus     -82.4     35.7 2015-01-13 00:25:39 1065588899</span>
<span class="co">#&gt;  3 Ursus americanus     -99.1     23.7 2015-02-20 23:00:00 1098894889</span>
<span class="co">#&gt;  4 Ursus americanus     -72.8     43.9 2015-02-13 16:16:41 1065611122</span>
<span class="co">#&gt;  5 Ursus americanus     -72.3     43.9 2015-03-01 20:20:45 1088908315</span>
<span class="co">#&gt;  6 Ursus americanus    -109.      32.7 2015-03-29 17:06:54 1088932238</span>
<span class="co">#&gt;  7 Ursus americanus    -109.      32.7 2015-03-29 17:12:50 1088932273</span>
<span class="co">#&gt;  8 Ursus americanus    -124.      40.1 2015-03-28 23:00:00 1132403409</span>
<span class="co">#&gt;  9 Ursus americanus     -78.3     36.9 2015-03-20 21:11:24 1088923534</span>
<span class="co">#&gt; 10 Ursus americanus     -76.8     35.5 2015-04-05 23:00:00 1088954559</span>
<span class="co">#&gt; # … with 1,490 more rows</span></code></pre></div>
<p>Remove incomplete coordinates</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># coord_incomplete(dframe(sample_data_1)) # w/o pipe</span>
<span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">sample_data_1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/coords.html">coord_incomplete</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,306 x 5</span>
<span class="co">#&gt;    name             longitude latitude date                       key</span>
<span class="co">#&gt;  * &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt; &lt;dttm&gt;                   &lt;int&gt;</span>
<span class="co">#&gt;  1 Ursus americanus     -79.7     38.4 2015-01-14 16:36:45 1065590124</span>
<span class="co">#&gt;  2 Ursus americanus     -82.4     35.7 2015-01-13 00:25:39 1065588899</span>
<span class="co">#&gt;  3 Ursus americanus     -99.1     23.7 2015-02-20 23:00:00 1098894889</span>
<span class="co">#&gt;  4 Ursus americanus     -72.8     43.9 2015-02-13 16:16:41 1065611122</span>
<span class="co">#&gt;  5 Ursus americanus     -72.3     43.9 2015-03-01 20:20:45 1088908315</span>
<span class="co">#&gt;  6 Ursus americanus    -109.      32.7 2015-03-29 17:06:54 1088932238</span>
<span class="co">#&gt;  7 Ursus americanus    -109.      32.7 2015-03-29 17:12:50 1088932273</span>
<span class="co">#&gt;  8 Ursus americanus    -124.      40.1 2015-03-28 23:00:00 1132403409</span>
<span class="co">#&gt;  9 Ursus americanus     -78.3     36.9 2015-03-20 21:11:24 1088923534</span>
<span class="co">#&gt; 10 Ursus americanus     -76.8     35.5 2015-04-05 23:00:00 1088954559</span>
<span class="co">#&gt; # … with 1,296 more rows</span></code></pre></div>
<p>Remove unlikely coordinates (e.g., those at 0,0)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># coord_unlikely(dframe(sample_data_1)) # w/o pipe</span>
<span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">sample_data_1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/coords.html">coord_unlikely</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,488 x 5</span>
<span class="co">#&gt;    name             longitude latitude date                       key</span>
<span class="co">#&gt;  * &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt; &lt;dttm&gt;                   &lt;int&gt;</span>
<span class="co">#&gt;  1 Ursus americanus     -79.7     38.4 2015-01-14 16:36:45 1065590124</span>
<span class="co">#&gt;  2 Ursus americanus     -82.4     35.7 2015-01-13 00:25:39 1065588899</span>
<span class="co">#&gt;  3 Ursus americanus     -99.1     23.7 2015-02-20 23:00:00 1098894889</span>
<span class="co">#&gt;  4 Ursus americanus     -72.8     43.9 2015-02-13 16:16:41 1065611122</span>
<span class="co">#&gt;  5 Ursus americanus     -72.3     43.9 2015-03-01 20:20:45 1088908315</span>
<span class="co">#&gt;  6 Ursus americanus    -109.      32.7 2015-03-29 17:06:54 1088932238</span>
<span class="co">#&gt;  7 Ursus americanus    -109.      32.7 2015-03-29 17:12:50 1088932273</span>
<span class="co">#&gt;  8 Ursus americanus    -124.      40.1 2015-03-28 23:00:00 1132403409</span>
<span class="co">#&gt;  9 Ursus americanus     -78.3     36.9 2015-03-20 21:11:24 1088923534</span>
<span class="co">#&gt; 10 Ursus americanus     -76.8     35.5 2015-04-05 23:00:00 1088954559</span>
<span class="co">#&gt; # … with 1,478 more rows</span></code></pre></div>
<p>Do all three</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">sample_data_1</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/coords.html">coord_impossible</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/coords.html">coord_incomplete</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/coords.html">coord_unlikely</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,294 x 5</span>
<span class="co">#&gt;    name             longitude latitude date                       key</span>
<span class="co">#&gt;  * &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt; &lt;dttm&gt;                   &lt;int&gt;</span>
<span class="co">#&gt;  1 Ursus americanus     -79.7     38.4 2015-01-14 16:36:45 1065590124</span>
<span class="co">#&gt;  2 Ursus americanus     -82.4     35.7 2015-01-13 00:25:39 1065588899</span>
<span class="co">#&gt;  3 Ursus americanus     -99.1     23.7 2015-02-20 23:00:00 1098894889</span>
<span class="co">#&gt;  4 Ursus americanus     -72.8     43.9 2015-02-13 16:16:41 1065611122</span>
<span class="co">#&gt;  5 Ursus americanus     -72.3     43.9 2015-03-01 20:20:45 1088908315</span>
<span class="co">#&gt;  6 Ursus americanus    -109.      32.7 2015-03-29 17:06:54 1088932238</span>
<span class="co">#&gt;  7 Ursus americanus    -109.      32.7 2015-03-29 17:12:50 1088932273</span>
<span class="co">#&gt;  8 Ursus americanus    -124.      40.1 2015-03-28 23:00:00 1132403409</span>
<span class="co">#&gt;  9 Ursus americanus     -78.3     36.9 2015-03-20 21:11:24 1088923534</span>
<span class="co">#&gt; 10 Ursus americanus     -76.8     35.5 2015-04-05 23:00:00 1088954559</span>
<span class="co">#&gt; # … with 1,284 more rows</span></code></pre></div>
<p>Don’t drop bad data</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">sample_data_1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/coords.html">coord_incomplete</a></span><span class="op">(</span>drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="va">NROW</span>
<span class="co">#&gt; [1] 1306</span>
<span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">sample_data_1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/coords.html">coord_incomplete</a></span><span class="op">(</span>drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="va">NROW</span>
<span class="co">#&gt; [1] 1500</span></code></pre></div>
</div>
<div id="deduplicate" class="section level2">
<h2 class="hasAnchor">
<a href="#deduplicate" class="anchor"></a>Deduplicate</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">smalldf</span> <span class="op">&lt;-</span> <span class="va">sample_data_1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="op">]</span>
<span class="co"># create a duplicate record</span>
<span class="va">smalldf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">smalldf</span>, <span class="va">smalldf</span><span class="op">[</span><span class="fl">10</span>,<span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">smalldf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
<span class="co"># make it slightly different</span>
<span class="va">smalldf</span><span class="op">[</span><span class="fl">21</span>, <span class="st">"key"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1088954555</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">NROW</a></span><span class="op">(</span><span class="va">smalldf</span><span class="op">)</span>
<span class="co">#&gt; [1] 21</span>
<span class="va">dp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">smalldf</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/dedup.html">dedup</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">NROW</a></span><span class="op">(</span><span class="va">dp</span><span class="op">)</span>
<span class="co">#&gt; [1] 20</span>
<span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">dp</span>, <span class="st">"dups"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 5</span>
<span class="co">#&gt;   name             longitude latitude date                       key</span>
<span class="co">#&gt;   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt; &lt;dttm&gt;                   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Ursus americanus     -76.8     35.5 2015-04-05 23:00:00 1088954555</span></code></pre></div>
</div>
<div id="dates" class="section level2">
<h2 class="hasAnchor">
<a href="#dates" class="anchor"></a>Dates</h2>
<p>Standardize/convert dates</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">sample_data_1</span>
<span class="co"># date_standardize(dframe(df), "%d%b%Y") # w/o pipe</span>
<span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/date.html">date_standardize</a></span><span class="op">(</span><span class="st">"%d%b%Y"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,500 x 5</span>
<span class="co">#&gt;    name             longitude latitude date             key</span>
<span class="co">#&gt;    &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;int&gt;</span>
<span class="co">#&gt;  1 Ursus americanus     -79.7     38.4 14Jan2015 1065590124</span>
<span class="co">#&gt;  2 Ursus americanus     -82.4     35.7 13Jan2015 1065588899</span>
<span class="co">#&gt;  3 Ursus americanus     -99.1     23.7 20Feb2015 1098894889</span>
<span class="co">#&gt;  4 Ursus americanus     -72.8     43.9 13Feb2015 1065611122</span>
<span class="co">#&gt;  5 Ursus americanus     -72.3     43.9 01Mar2015 1088908315</span>
<span class="co">#&gt;  6 Ursus americanus    -109.      32.7 29Mar2015 1088932238</span>
<span class="co">#&gt;  7 Ursus americanus    -109.      32.7 29Mar2015 1088932273</span>
<span class="co">#&gt;  8 Ursus americanus    -124.      40.1 28Mar2015 1132403409</span>
<span class="co">#&gt;  9 Ursus americanus     -78.3     36.9 20Mar2015 1088923534</span>
<span class="co">#&gt; 10 Ursus americanus     -76.8     35.5 05Apr2015 1088954559</span>
<span class="co">#&gt; # … with 1,490 more rows</span></code></pre></div>
<p>Drop records without dates</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">NROW</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; [1] 1500</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">NROW</a></span><span class="op">(</span><span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/date.html">date_missing</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 1498</span></code></pre></div>
<p>Create date field from other fields</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">sample_data_2</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/date.html">date_create</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,500 x 8</span>
<span class="co">#&gt;    name             longitude latitude        key year  month day   date      </span>
<span class="co">#&gt;    &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     </span>
<span class="co">#&gt;  1 Ursus americanus     -79.7     38.4 1065590124 2015  01    14    2015-01-14</span>
<span class="co">#&gt;  2 Ursus americanus     -82.4     35.7 1065588899 2015  01    13    2015-01-13</span>
<span class="co">#&gt;  3 Ursus americanus     -99.1     23.7 1098894889 2015  02    20    2015-02-20</span>
<span class="co">#&gt;  4 Ursus americanus     -72.8     43.9 1065611122 2015  02    13    2015-02-13</span>
<span class="co">#&gt;  5 Ursus americanus     -72.3     43.9 1088908315 2015  03    01    2015-03-01</span>
<span class="co">#&gt;  6 Ursus americanus    -109.      32.7 1088932238 2015  03    29    2015-03-29</span>
<span class="co">#&gt;  7 Ursus americanus    -109.      32.7 1088932273 2015  03    29    2015-03-29</span>
<span class="co">#&gt;  8 Ursus americanus    -124.      40.1 1132403409 2015  03    28    2015-03-28</span>
<span class="co">#&gt;  9 Ursus americanus     -78.3     36.9 1088923534 2015  03    20    2015-03-20</span>
<span class="co">#&gt; 10 Ursus americanus     -76.8     35.5 1088954559 2015  04    05    2015-04-05</span>
<span class="co">#&gt; # … with 1,490 more rows</span></code></pre></div>
</div>
<div id="ecoregion" class="section level2">
<h2 class="hasAnchor">
<a href="#ecoregion" class="anchor"></a>Ecoregion</h2>
<p>Filter by FAO areas</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wkt</span> <span class="op">&lt;-</span> <span class="st">'POLYGON((72.2 38.5,-173.6 38.5,-173.6 -41.5,72.2 -41.5,72.2 38.5))'</span>
<span class="va">manta_ray</span> <span class="op">&lt;-</span> <span class="fu">rgbif</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/name_backbone.html">name_backbone</a></span><span class="op">(</span><span class="st">"Mobula alfredi"</span><span class="op">)</span><span class="op">$</span><span class="va">usageKey</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">rgbif</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/rgbif/reference/occ_data.html">occ_data</a></span><span class="op">(</span><span class="va">manta_ray</span>, geometry <span class="op">=</span> <span class="va">wkt</span>, limit<span class="op">=</span><span class="fl">300</span>, hasCoordinate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">data</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"decimalLongitude"</span>, <span class="st">"decimalLatitude"</span><span class="op">)</span><span class="op">)</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fl">4326</span><span class="op">)</span>
<span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapview</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/eco_region.html">eco_region</a></span><span class="op">(</span><span class="fu"><a href="reference/dframe.html">dframe</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>, dataset <span class="op">=</span> <span class="st">"fao"</span>, region <span class="op">=</span> <span class="st">"OCEAN:Indian"</span><span class="op">)</span>
<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="va">tmp</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span>, <span class="op">]</span>
<span class="va">tmp2</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">tmp</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"decimalLongitude"</span>, <span class="st">"decimalLatitude"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tmp2</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs</a></span><span class="op">(</span><span class="va">tmp2</span>, <span class="fl">4326</span><span class="op">)</span>
<span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapview</a></span><span class="op">(</span><span class="va">tmp2</span><span class="op">)</span></code></pre></div>
</div>
<div id="meta" class="section level2">
<h2 class="hasAnchor">
<a href="#meta" class="anchor"></a>Meta</h2>
<ul>
<li>Please <a href="https://github.com/ropensci/scrubr/issues">report any issues or bugs</a>.</li>
<li>License: MIT</li>
<li>Get citation information for <code>scrubr</code> in R doing <code><a href="https://rdrr.io/r/utils/citation.html">citation(package = 'scrubr')</a></code>
</li>
<li>Please note that this package is released with a <a href="https://ropensci.org/code-of-conduct/">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=scrubr">https://​cloud.r-project.org/​package=scrubr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ropensci/scrubr/">https://​github.com/​ropensci/​scrubr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ropensci/scrubr/issues">https://​github.com/​ropensci/​scrubr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Scott Chamberlain <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1444-9135" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-scrubr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
